<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Git Project Manager / Commission Open Source</title><meta name=author content="Yann Esposito"><meta name=description content><meta name=keywords content><link rel=stylesheet href=/css/y.css><link rel=alternate type=application/rss+xml href=/rss.xml><link rel=icon href=/favicon.ico><meta name=theme-color media="(prefers-color-scheme: light)" content="#d84100"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#2E3440"><link rel=stylesheet href=/css/slides.css><header><div id=logo><a href=/><div class=vis-hidden>Go to Home</div><svg width="5em" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" stroke="#a3aec2" stroke-width="1" fill="#2e3440"/><circle class="i1" cx="32" cy="32" r="12" stroke="#800" stroke-width="1" fill="#c20"/><circle class="i0" cx="32" cy="32" r="5" stroke-width="1" stroke="#f60" fill="#fa0"/><ellipse class="e" cx="32" cy="14" rx="14" ry="8" stroke-width="0" fill="#fff"/></svg></a></div><div class=content><h1>Git Project Manager / Commission Open Source</h1><div class=meta><span class=yyydate>&lt;2018-10-25 Thu></span> on
<a href=https://her.esy.fun><span class=author>Yann Esposito</span>'s blog</a></div><div class=abstract></div></div></header><main id=content><article><h1 id=code-from-this-talk-git-project-manager>Code from this talk →
<a href=https://gitlab.esy.fun/yogsototh/gpm>Git Project
Manager</a></h1><h2 id=git-is-a-distributed-concurrent-versions-system><code class=verbatim>git</code> is a <strong>Distributed</strong> Concurrent
Versions System</h2><h2 id=github-is-a-centralized-git-host>GitHub is a
<strong>Centralized</strong> <code class=verbatim>git</code> host</h2><h1 id=can-we-do-without-github>Can we do without Github™?</h1><h3 id=betteridges-law>Betteridge's law</h3><p>Betteridge's law of headlines is an adage that states:<blockquote><p>Any headline that ends in a question mark can be answered by the word
no.</blockquote><div class=incremental><p>Here the answer is <strong>YES</strong>!<ul><li>Linux (only mail)<li>GHC used a self hosted instance of phabricator + trac<li>many others I don't know</ul></div><h3 id=all-right-we-can-but-should-we>All right, we can, but
<em>should we</em>?</h3><pre><code>__   _______ ____  _
\ \ / / ____/ ___|| |
 \ V /|  _| \___ \| |
  | | | |___ ___) |_|
  |_| |_____|____/(_)
</code></pre><h3 id=short-history>Short History</h3><ul><li>Internet (decentralized, email, bbs, usenet, etc…)<li>P2P -> no business<li>Centralized -> business, steal data!!!!<li>Decentralized again!<ul><li>cryptobulshit: crash business <code class=verbatim>$$$$ -> #!@*!</code><li>bio blockchains: sustainable business <code class=verbatim>$$</code><li>old fashionned style: ???</ul></ul><h2 id=github>GitHub™</h2><h3 id=github-social-network>GitHub™: Social Network</h3><ul><li>user management & trust<li>discoverability</ul><h3 id=github-its-free>GitHub™: its free!</h3><blockquote><p>If you're not paying for it, you're the product being sold.</blockquote><p>$$: Pay for private repositories<h3 id=github-features>GitHub™: Features!!!</h3><p>From their website (in that order):<ul><li><em>Code Review</em>: comment diffs, approve, refuse, etc…<li><em>Project Management</em>: issues, milestones, dashboard,
etc…<li><em>Integrations</em>: travis, slack, etc…<li><em>Team Management</em>: access rights, community guidelines,
etc…<li><em>Social Coding</em>: follow, explore, share, etc…<li><em>Documentation</em>: github pages, wiki, …à<li><em>Code Hosting</em>: all your code in one place, tree view, blame
view, etc…</ul><h3 id=github-metas>GitHub™: Metas</h3><p>Most GitHub™ features put data in their own internal closed
representation:<ul><li>Issues<li>Comments<li>Pages<li>Pull Request & review<li>Wiki</ul><p>Note there are tools to export them. Ex: migrate to Gitlab<h3 id=github-is-great-today-but-can-suck-tomorrow>GitHub™ is great
today but can suck tomorrow</h3><ul><li><em>bloatware</em> remember digg, readitlater?<li><em>downgradeware</em> Swagger-UI v3 (v2 is neat), reddit new
redesign (looks better, but slow)<li><em>payware</em> You rely on our feature, but now, we want you to
move or to pay. Fair ;)<li><em>crapware</em> Nothing works as expected unless you pay: Twitter
streaming API?<li><em>dieware</em> Remember Friendfeed? Google Reader™?<li>etc…</ul><h3 id=github-force-all-your-team-member-to-use-github>GitHub™ force
all your team member to use GitHub™</h3><p>Were you already forced to:<ul><li>use PowerPoint? Excel? Word?<li>code in PHP? in Java?<li>work on windows? Harder need to ssh to UNIX machines?<li>use Eclipse instead of vim/emacs?<li>use a super complex GUI instead of a few command line tools?<li>etc…</ul><p><strong>REAL STORY @WORK</strong>: github dashboard is slow &
terrible for the manager.<h3 id=why-you-shouldnt-rely-too-much-on-github>Why you shouldn't rely
too much on GitHub™?</h3><ul><li>Github™ is great to get you started:<ul><li>nothing to install<li>only high level interface<li>everything explained with nice docs<li>github is really a great product</ul><li><strong>The hidden price to pay</strong>:<ul><li>use closed source services<li>give freely many private infos<li>you must TRUST github for privacy, private account</ul></ul><h3 id=why-not-self-hosted-gitlab-then>Why not self hosted Gitlab
then?</h3><p>Gitlab is a better alternative but:<ul><li>You still keep the metas of your project in the Gitlab server in
some DB.<li>You still force all the member of your team to use your Gitlab
version, with your Gitlab plugins, with your Gitlab settings, etc…<li>Gitlab push a big warn so you are pushed to upgrade (new features
& anti-features)</ul><h3 id=git-clone><code class=verbatim>git clone</code></h3><ul class=task-list><li><p><input type=checkbox disabled checked>code<li><p><input type=checkbox disabled checked>web
pages<li><p><input type=checkbox disabled><strong>issues</strong><li><p><input type=checkbox disabled><strong>reviews</strong><li><p><input type=checkbox disabled><strong>comments</strong><li><p><input type=checkbox disabled><strong>wiki/doc</strong><li><p><input type=checkbox disabled><strong>hooks</strong></ul><h1 id=git-project-manager>Git Project Manager</h1><h3 id=problems>Problems</h3><ul><li>can't clone everything<li>big dependence on private tooling (that could change or being
interrupted)<li>force same tooling choices accross your team members</ul><h3 id=solution>Solution</h3><ul><li>put metas in git branches <strong>CLONE ALL THE
THINGS!!!!</strong></ul><div class=incremental><ul><li>use text files for everything <strong>DO NOT FORCE ANY
TOOL</strong></ul></div><div class=incremental><ul><li>only rely on conventions, better on standardized conventions
<strong>HELP TO WRITE SPECIFIC OPEN SOURCE TOOLS</strong></ul></div><h3 id=git-project-manager-gpm>Git Project Manager <code class=verbatim>gpm</code></h3><ul><li>command line tool<li>integrate your project management metas in your git repo<li>automate a few common tasks<li>follow a few conventions</ul><p><em>Tool freedom</em><ul><li>people on the team don't need to install or use <code class=verbatim>gpm</code><li>they just need to follow a minimal set of conventions<li>want to use other conventions? Write yourself a <code class=verbatim>gpm</code> in a few hours.<li>but really there are <em>very few</em> conventions <code class=verbatim>gpm</code> follows</ul><h3 id=gpm-conventions><code class=verbatim>gpm</code>
conventions</h3><ul><li><code class=verbatim>git</code> as DCSV<li>text files<li>Project Management metas goes in the branch <code class=verbatim>gpm</code></ul><h3 id=encouraged-but-not-enforced-gpm-conventions>Encouraged but not
enforced <code class=verbatim>gpm</code> conventions</h3><ul><li>encourage to use <code class=verbatim>org-mode</code> format but
you can change<li>issues goes in <code class=verbatim>issues.org</code> file<li>reviews goes in <code class=verbatim>reviews/</code> with name
<code class=verbatim>&lt;branch>-&lt;reviewer>.org</code><li>docs goes in <code class=verbatim>wiki.org</code><li>serve goes in your XDG data dir (standard)</ul><h3 id=git-is-awesome>git is awesome!</h3><p>battery included:<ul><li><code class=verbatim>git</code> hooks<li><code class=verbatim>git instaweb</code><li><code class=verbatim>git daemon</code></ul><h3 id=org-mode-is-awesome>org-mode is awesome</h3><ul><li>TODO list oriented document convention<li>Extremely versatile:<ul><li>issues, bug tracking, comments<li>handling with minimal friction code reviews <code class=verbatim>org-annotate-file</code><li>workflows:<ul><li>basic trello (TODO, IN-PROGRESS, DONE)<li>scrum (EPIC / USER-STORY / etc…)<li>kanban:<ul><li>EPIC with different statuses (prep, specified,etc..), comments<li>user stories with evaluation, different status, comments<li>QA status<li>Ops status</ul></ul></ul></ul><h1 id=demo>DEMO</h1><h3 id=create-a-git-project>Create a git project</h3><div class=sourceCode id=cb2><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb2-1><a href=#cb2-1 aria-hidden=true tabindex=-1></a><span class=fu>mkdir</span> <span class=at>-p</span> /tmp/gpm-playground/testprj</span>
<span id=cb2-2><a href=#cb2-2 aria-hidden=true tabindex=-1></a><span class=bu>cd</span> /tmp/gpm-playground/testprj</span>
<span id=cb2-3><a href=#cb2-3 aria-hidden=true tabindex=-1></a><span class=bu>echo</span> <span class=st>&quot;Hello GPM&quot;</span> <span class=op>&gt;</span> README</span>
<span id=cb2-4><a href=#cb2-4 aria-hidden=true tabindex=-1></a><span class=fu>git</span> init .</span>
<span id=cb2-5><a href=#cb2-5 aria-hidden=true tabindex=-1></a><span class=fu>git</span> add README</span>
<span id=cb2-6><a href=#cb2-6 aria-hidden=true tabindex=-1></a><span class=fu>git</span> commit <span class=at>-m</span> <span class=st>&quot;Initial commit&quot;</span></span></code></pre></div><h3 id=gpm-init-1><code class=verbatim>gpm init</code> (1)</h3><div class=sourceCode id=cb3><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb3-1><a href=#cb3-1 aria-hidden=true tabindex=-1></a><span class=ex>gpm</span> init</span></code></pre></div><pre><code>GPM -- Git Project Manager
==========================
Create a new branch gpm (be sure the branch gpm doesn&#39;t already exists)
    git checkout --orphan gpm
Switched to a new branch &#39;gpm&#39;
cleanup the branch
    git rm --cached -r .
    git clean -fd
</code></pre><h3 id=gpm-init-2><code class=verbatim>gpm init</code> (2)</h3><pre><code>* issue.org
    git add issues.org
    git add templat
* wiki.org
    git add wiki.or
* reviews.org
    create some example review for inspiration
      reviews/write-contributing-yogsototh.org
    git add reviews
    create some review templates
      templates/new-review.org
    git add templates
</code></pre><h3 id=gpm-init-3><code class=verbatim>gpm init</code> (3)</h3><pre><code>* hooks/
    Copyings default hooks into the hooks directory
    git add hoo
* server init
create dir: /Users/yaesposi/.local/share/gpm/public
    git init .
    git rev-parse --show-toplevel
    git rev-parse --show-toplevel
    git clone --mirror /tmp/gpm-playground/testprj
               ~/.local/share/gpm/public/testprj.git
Cloning into bare repository &#39;.../testprj.git&#39;...
done.
    git update-server-info
    git commit -m &#39;gpm initialized&#39;
    git checkout master
Switched to branch &#39;master&#39;
</code></pre><h3 id=the-gpm-branch>The <code class=verbatim>gpm</code>
branch</h3><pre><code>&gt; git checktout gpm
&gt; tree
.
├── hooks
│   ├── applypatch-msg.sample
│   ├── commit-msg.sample
│   └── ...
├── issues.org
├── reviews
│   └── write-contributing-yogsototh.org
├── templates
│   ├── new-issue.org
│   └── new-review.org
└── wiki.org

3 directories, 16 files
</code></pre><h3 id=hooks>Hooks</h3><div class=sourceCode id=cb8><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb8-1><a href=#cb8-1 aria-hidden=true tabindex=-1></a><span class=op>&gt;</span> gpm <span class=ex>hooks</span></span>
<span id=cb8-2><a href=#cb8-2 aria-hidden=true tabindex=-1></a><span class=ex>Usage:</span> gpm hooks sync</span>
<span id=cb8-3><a href=#cb8-3 aria-hidden=true tabindex=-1></a>  <span class=ex>Handle</span> hooks for this git repository</span>
<span id=cb8-4><a href=#cb8-4 aria-hidden=true tabindex=-1></a></span>
<span id=cb8-5><a href=#cb8-5 aria-hidden=true tabindex=-1></a><span class=ex>Available</span> options:</span>
<span id=cb8-6><a href=#cb8-6 aria-hidden=true tabindex=-1></a>  <span class=ex>-h,--help</span>                Show this help text</span>
<span id=cb8-7><a href=#cb8-7 aria-hidden=true tabindex=-1></a></span>
<span id=cb8-8><a href=#cb8-8 aria-hidden=true tabindex=-1></a><span class=ex>Available</span> commands:</span>
<span id=cb8-9><a href=#cb8-9 aria-hidden=true tabindex=-1></a>  <span class=fu>sync</span>                     Synchronize hooks from gpm branch</span></code></pre></div><h3 id=issues.org-basic><code class=verbatim>issues.org</code>
Basic</h3><div class=sourceCode id=cb9><pre class="sourceCode org"><code class="sourceCode orgmode"><span id=cb9-1><a href=#cb9-1 aria-hidden=true tabindex=-1></a><span class=pp>#+TODO: TODO(t) STARTED(s) WAITING(w) | DONE(d) CANCELLED(c)</span></span>
<span id=cb9-2><a href=#cb9-2 aria-hidden=true tabindex=-1></a><span class=fu>* Basic Usages</span></span>
<span id=cb9-3><a href=#cb9-3 aria-hidden=true tabindex=-1></a><span class=fu>** </span><span class=al>TODO</span><span class=fu> Do thing 3</span></span>
<span id=cb9-4><a href=#cb9-4 aria-hidden=true tabindex=-1></a><span class=fu>** STARTED Do thing 2</span></span>
<span id=cb9-5><a href=#cb9-5 aria-hidden=true tabindex=-1></a><span class=fu>** </span><span class=in>DONE</span><span class=fu> Do thing 1</span></span></code></pre></div><h3 id=issues.org-complex-workflow-review><code class=verbatim>issues.org</code> Complex workflow, review</h3><div class=sourceCode id=cb10><pre class="sourceCode org"><code class="sourceCode orgmode"><span id=cb10-1><a href=#cb10-1 aria-hidden=true tabindex=-1></a><span class=pp> #+PROPERTY: ASSIGNEE</span></span>
<span id=cb10-2><a href=#cb10-2 aria-hidden=true tabindex=-1></a><span class=pp> #+PROPERTY: REVIEWER</span></span>
<span id=cb10-3><a href=#cb10-3 aria-hidden=true tabindex=-1></a><span class=pp> #+TODO: REVIEW(i) | MERGED(m)</span></span>
<span id=cb10-4><a href=#cb10-4 aria-hidden=true tabindex=-1></a><span class=pp> #+TODO: ACCEPTED(a) CHANGE_REQUESTED(c) QUESTION(q) FEEDBACK(f) | REFUSED(r)</span></span>
<span id=cb10-5><a href=#cb10-5 aria-hidden=true tabindex=-1></a> ** REVIEW Basic review process</span>
<span id=cb10-6><a href=#cb10-6 aria-hidden=true tabindex=-1></a>  :PROPERTIES:</span>
<span id=cb10-7><a href=#cb10-7 aria-hidden=true tabindex=-1></a>  :BRANCH:   explain-review-process</span>
<span id=cb10-8><a href=#cb10-8 aria-hidden=true tabindex=-1></a>  :ASSIGNEE: yogsototh</span>
<span id=cb10-9><a href=#cb10-9 aria-hidden=true tabindex=-1></a>  :END:</span>
<span id=cb10-10><a href=#cb10-10 aria-hidden=true tabindex=-1></a></span>
<span id=cb10-11><a href=#cb10-11 aria-hidden=true tabindex=-1></a><span class=fu>*** ACCEPTED Review finished</span></span>
<span id=cb10-12><a href=#cb10-12 aria-hidden=true tabindex=-1></a>   :PROPERTIES:</span>
<span id=cb10-13><a href=#cb10-13 aria-hidden=true tabindex=-1></a>   :REVIEWER: shubby</span>
<span id=cb10-14><a href=#cb10-14 aria-hidden=true tabindex=-1></a>   :END:</span></code></pre></div><h3 id=issues.org-full-professional-usage><code class=verbatim>issues.org</code> Full Professional Usage</h3><div class=sourceCode id=cb11><pre class="sourceCode org"><code class="sourceCode orgmode"><span id=cb11-1><a href=#cb11-1 aria-hidden=true tabindex=-1></a><span class=pp>#+TAGS: epic(e) user_story(u) task(t) qa(q) ops(o)</span></span>
<span id=cb11-2><a href=#cb11-2 aria-hidden=true tabindex=-1></a></span>
<span id=cb11-3><a href=#cb11-3 aria-hidden=true tabindex=-1></a> * Some Title                                                                               :epic:</span>
<span id=cb11-4><a href=#cb11-4 aria-hidden=true tabindex=-1></a> ** Some User Story                                                                       :story:</span>
<span id=cb11-5><a href=#cb11-5 aria-hidden=true tabindex=-1></a> *** Dev Task                                                                         :task:dev:</span>
<span id=cb11-6><a href=#cb11-6 aria-hidden=true tabindex=-1></a> *** Document Task                                                                    :task:doc:</span>
<span id=cb11-7><a href=#cb11-7 aria-hidden=true tabindex=-1></a> *** QA Task                                                                           :task:qa:</span>
<span id=cb11-8><a href=#cb11-8 aria-hidden=true tabindex=-1></a> *** Ops Task                                                                         :task:ops:</span></code></pre></div><h3 id=gpm-new-issue><code class=verbatim>gpm new-issue</code></h3><div class=sourceCode id=cb12><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb12-1><a href=#cb12-1 aria-hidden=true tabindex=-1></a><span class=op>&gt;</span> gpm <span class=ex>new-issue</span> <span class=at>-i</span></span></code></pre></div><h3 id=gpm-serve><code class=verbatim>gpm serve</code></h3><ul><li>web interface: <code class=verbatim>git instaweb</code> (port
1234)<li>git server: <code class=verbatim>git daemon</code> (port
9418)</ul><pre><code>Usage: gpm serve (start | stop | update | path)
  Serve the git to the web

Available options:
  -h,--help                Show this help text

Available commands:
  start                    Start to serve all gpm tracked repositories
  stop                     Stop to serve all gpm tracked repositories
  update                   Update the served git repository
  path                     Show the path of the bare repository
</code></pre><h3 id=gpm-review-classical-workflow><code class=verbatim>gpm review</code>: classical workflow</h3><ol><li>dev create a new feature branch<li>reviewer review the branch<li>dev pull the <code class=verbatim>gpm</code> branch and <code class=verbatim>gpm retrieve</code> the reviews<li>dev take feedbacks into account<li>goto 2 until reviewer accept the branch<li>integration manager/dictator/lieutenant merge the branch</ol><h3 id=gpm-review-reviewer-step-2-of-previous-slide><code class=verbatim>gpm review</code>: reviewer (step 2 of previous
slide)</h3><ol><li>reviewer pull the remote feature branch<li>gpm review start: create a local file<li>write the review: <code class=verbatim>org-annotate-file</code>
FTW!<li>stop the review: copy the local file in gpm branch and commit
it<li><code class=verbatim>gpm update</code> to serve the updated <code class=verbatim>gpm</code> branch</ol><h1 id=conclusion>Conclusion</h1><h3 id=proof-of-concept>Proof of concept</h3><ul><li><code class=verbatim>gpm</code> is a proof of concept but so
simple its already usable<li>git clone should provide most of your projects data<li>don't enforce tooling on your team, use text files<li>I advise you to use org-mode it is awesome! <strong>REALLY!</strong><ul><li>vimer? ⇒ spacemacs or doom-emacs<li>IDE? ⇒ switch to spacemacs eat the bullet!<li>you still can edit org-mode with notepad</ul></ul><h3 id=lot-of-things-already-done>Lot of things already done</h3><ul><li>git-scm.org has plenty of resources<li>git instaweb<li>git daemon<li>how to serve git with apaches, if you want to use another non
decentralized workflow, or share hosting with a few peers</ul><h3 id=going-further-decentralized-web>Going further: Decentralized
Web</h3><ul><li>the Internet was thought to be decentralized<li>centralization of services made lot of things easy, it was fair at
first<li>but made us dependant and the balance is no more fair<li>it is time to re-decentralize the Internet and take back
control<li>we shouldn't be dependant of private services<li>we should pay private service, but they should adapt to us, not the
other way around</ul><h3 id=decentralized-authentication-indieauth>Decentralized
Authentication: IndieAuth</h3><ul><li>one of your online identities = one domaine name<li>serve a page with all your online identity providers and username<ul><li>google<li>twitter<li>etc…<li>but also your GPG keys (see keybase)</ul></ul><p>Mainly you OWN & CONTROL your identity and the informations about
it.<h3 id=decentralized-comments-webmention>Decentralized Comments:
webmention</h3><ul><li>you host your comment<li>a 3rd party website can decide to show it in its comment
section</ul><h3 id=decentralized-web>Decentralized Web</h3><ul><li>Your content is yours (prevent site death, change it, delete
it…)<li>Better connection:<ul><li>messages can go to all your services<li>use open standards</ul><li>You are in control<ul><li>post anything, any format, no monitoring, share links.</ul></ul><p>Follow:<ul><li><a href=https://indiewebify.me>https://indiewebify.me</a><li><a href=https://indieweb.html>https://indieweb.org</a></ul></article></main><footer id=postamble class=status><div class=content><nav role=navigation><a href=/index.html>Home</a> |
<a href=/slides.html>Slides</a> |
<a href=/about-me.html>About</a>
<span class=details>(<a href=https://gitea.esy.fun/yogsototh>code</a>
<a href=https://espial.esy.fun/u:yogsototh>bookmarks</a>
<a href=https://espial.esy.fun/u:yogsototh/notes>notes</a>)</span> |
<a href=#logo>↑ Top ↑</a></nav></div></footer>