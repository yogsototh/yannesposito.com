<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Auto change emacs theme</title><meta name=author content="Yann Esposito"><meta name=description content="A small snippet to automatically change theme in emacs."><meta name=keywords content="emacs"><link rel=stylesheet href=/css/y.css><link rel=alternate type=application/rss+xml href=/rss.xml><link rel=icon href=/favicon.ico><div class=main><div id=logo><a href=/><svg width="5em" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" stroke="#a3aec2" stroke-width="2" fill="#2e3440"/><circle cx="32" cy="32" r="12" stroke="#e62729" stroke-width="2" fill="#d84100"/><circle cx="32" cy="32" r="6" stroke-width="0" fill="#c18600"/><ellipse cx="32" cy="14" rx="14" ry="8" stroke-width="0" fill="#fff"/></svg></a></div><div id=preamble class=status><div class=content><h1>Auto change emacs theme</h1><div class=meta><span class=yyydate>[2020-09-22 Tue]</span> on
<a href=https://her.esy.fun><span class=author>Yann Esposito</span>'s blog</a></div><div class=abstract>A small snippet to automatically change theme in emacs.</div></div></div><div id=content><p>One thing I kind of like is the ability to change emacs theme depending of the hour. There are two possibilities. One would be to sync with the sun using the current location. There is an emacs package for that. It's called <a href=https://github.com/hadronzoo/theme-changer>theme-changer</a> which at the time of writing those lines is asking for a new maintainer. This theme changer is very elegant because like macOS use the location to determine if it is day or night. But I wanted to have more themes from morning to night:<ol><li>early morning: deep yellow (gruvbox-light),<li>morning: light yellow (solarized-light),<li>day: grey/blueish during the day (nord-light),<li>evening: deep yellow again (gruvbox-light)<li>night: dark theme (oceanic-next)<li>sleep time: neon-like (laserwave)</ol><p>And also, I wanted that to follow my working hours and not really the sun. I might change my mind and use the code of theme-changer to follow the curve of the sun. But for now, just using straight hours should be good enough. So here is my piece of code I added to my doom-emacs <code class=verbatim>config.el</code>:<div class=sourceCode id=cb1 data-org-language=emacs-lisp><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id=cb1-1><a href=#cb1-1 aria-hidden=true tabindex=-1></a>(<span class=kw>defun</span><span class=fu> y/auto-update-theme </span>()</span>
<span id=cb1-2><a href=#cb1-2 aria-hidden=true tabindex=-1></a>  <span class=st>&quot;depending on time use different theme&quot;</span></span>
<span id=cb1-3><a href=#cb1-3 aria-hidden=true tabindex=-1></a>  <span class=co>;; very early =&gt; gruvbox-light, solarized-light, nord-light</span></span>
<span id=cb1-4><a href=#cb1-4 aria-hidden=true tabindex=-1></a>  (<span class=kw>let*</span> ((hour (<span class=kw>nth</span> <span class=dv>2</span> (decode-time (current-time))))</span>
<span id=cb1-5><a href=#cb1-5 aria-hidden=true tabindex=-1></a>         (theme (<span class=kw>cond</span> ((<span class=op>&lt;=</span> <span class=dv>7</span> hour <span class=dv>8</span>)   &#39;doom-gruvbox-light)</span>
<span id=cb1-6><a href=#cb1-6 aria-hidden=true tabindex=-1></a>                      ((<span class=op>=</span> <span class=dv>9</span> hour)      &#39;doom-solarized-light)</span>
<span id=cb1-7><a href=#cb1-7 aria-hidden=true tabindex=-1></a>                      ((<span class=op>&lt;=</span> <span class=dv>10</span> hour <span class=dv>16</span>) &#39;doom-nord-light)</span>
<span id=cb1-8><a href=#cb1-8 aria-hidden=true tabindex=-1></a>                      ((<span class=op>&lt;=</span> <span class=dv>17</span> hour <span class=dv>18</span>) &#39;doom-gruvbox-light)</span>
<span id=cb1-9><a href=#cb1-9 aria-hidden=true tabindex=-1></a>                      ((<span class=op>&lt;=</span> <span class=dv>19</span> hour <span class=dv>22</span>) &#39;doom-oceanic-next)</span>
<span id=cb1-10><a href=#cb1-10 aria-hidden=true tabindex=-1></a>                      (<span class=kw>t</span>               &#39;doom-laserwave))))</span>
<span id=cb1-11><a href=#cb1-11 aria-hidden=true tabindex=-1></a>    (<span class=kw>when</span> (<span class=kw>not</span> (<span class=kw>equal</span> doom-theme theme))</span>
<span id=cb1-12><a href=#cb1-12 aria-hidden=true tabindex=-1></a>      (<span class=kw>setq</span> doom-theme theme)</span>
<span id=cb1-13><a href=#cb1-13 aria-hidden=true tabindex=-1></a>      (load-theme doom-theme <span class=kw>t</span>))</span>
<span id=cb1-14><a href=#cb1-14 aria-hidden=true tabindex=-1></a>    <span class=co>;; run that function again next hour</span></span>
<span id=cb1-15><a href=#cb1-15 aria-hidden=true tabindex=-1></a>    (run-at-time (<span class=kw>format</span> <span class=st>&quot;%02d:%02d&quot;</span> (<span class=op>+</span> hour <span class=dv>1</span>) <span class=dv>0</span>) <span class=kw>nil</span> &#39;y/auto-update-theme)))</span>
<span id=cb1-16><a href=#cb1-16 aria-hidden=true tabindex=-1></a></span>
<span id=cb1-17><a href=#cb1-17 aria-hidden=true tabindex=-1></a>(y/auto-update-theme)</span></code></pre></div><p>I'm still playing with it. So there still might be a bug. Use at your own risk. Happy hacking to all of you.</div><div id=postamble class=status><div class=content><nav><a href=/index.html>Home</a> |
<a href=/slides.html>Slides</a> |
<a href=/about-me.html>About</a>
<span class=details>(<a href=https://gitea.esy.fun/yogsototh>code</a>
<a href=https://espial.esy.fun/u:yogsototh>bookmarks</a>
<a href=https://espial.esy.fun/u:yogsototh/notes>notes</a>)</span> |
<a href=#logo>↑ Top ↑</a></nav></div></div></div>