<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Catalina iTerm Theme switch</title><meta name=author content="Yann Esposito"><meta name=description content><meta name=keywords content><link rel=stylesheet href=/css/y.css><link rel=alternate type=application/rss+xml href=/rss.xml><link rel=icon href=/favicon.ico><input name=t type=radio id=b>
<input name=t type=radio id=l>
<input name=t type=radio id=d>
<input name=t type=radio id=g><div id=labels><div class=ak><label for=b>book</label>&nbsp;
/&nbsp;
<label for=l>light</label>&nbsp;
<span id=logo><a href=/><svg width="5em" viewBox="0 0 64 64"><circle cx="32" cy="32" r="30" stroke="var(--b2)" stroke-width="2" fill="var(--b03)"/><circle cx="32" cy="32" r="12" stroke="var(--r)" stroke-width="2" fill="var(--o)"/><circle cx="32" cy="32" r="6" stroke-width="0" fill="var(--y)"/><ellipse cx="32" cy="14" rx="14" ry="8" stroke-width="0" fill="var(--b3)"/></svg></a></span>&nbsp;
<label for=d>dark</label>&nbsp;
/&nbsp;
<label for=g>geek</label></div></div><div class=cc><div id=preamble class=aq><div class=ak><h1>Catalina iTerm Theme switch</h1><div class=ca><span class=am-date>2019-11-10</span> on
<a href=https://her.esy.fun><span class=bc>Yann Esposito</span>'s blog</a> -
<a href=/posts/0007-switch-iterm-profile-catalina/index.org>source</a> -
<a href=/posts/0007-switch-iterm-profile-catalina/index.gmi>gmi</a> -
<a href=/posts/0007-switch-iterm-profile-catalina/index.pdf>pdf</a> -
<a class=q href=https://her.esy.fun/posts/0007-switch-iterm-profile-catalina/index.html>§permalink</a></div><div class=ac></div></div></div><div id=content><div class=bi><p>How to have dark/light profile selected when opening a new iTerm.</div><h1 id=the-script>The script</h1><p>For the script to work you need to have two iTerm profiles, one named <code class=w>Dark</code> and the other one <code class=w>Light</code>. Just go to <code class=w>Preferences</code> then <code class=w>Profiles</code> then <code class=w>Duplicate profile</code>.<p>I use <code class=w>fish</code> but you can easily adapt that in your <code class=w>.bashrc</code>, <code class=w>.bash_profile</code> etc…<p>Here is what I have in my <code class=w>~/.config/fish/config.fish</code>:<pre class=cf><code>function setItermProfile
    echo -ne &quot;\033]50;SetProfile=$argv\a&quot;
end

function sync_appearance

    set -x MacOSThemeAutoSwitch \
        (defaults read -g AppleInterfaceStyleSwitchesAutomatically 2&gt;/dev/null)
    test -z $MacOSThemeAutoSwitch; and set -x MacOSThemeAutoSwitch 0

    set -x MacOSTheme (defaults read -g AppleInterfaceStyle 2&gt;/dev/null)
    test -z $MacOSTheme; and set -x MacOSTheme &#39;nil&#39;

    if test -n $ITERM_PROFILE # check if we are using iTerm2
        switch $MacOSThemeAutoSwitch
            case 1 # autoswitch on
                switch $MacOSTheme
                    case &#39;nil&#39;
                        setItermProfile Light
                    case &#39;*&#39;
                        setItermProfile Dark
                end
            case 0 # autoswitch off
                switch $MacOSTheme
                    case &#39;Dark&#39;
                        setItermProfile Dark
                    case &#39;Light&#39;
                        setItermProfile Light
                    case &#39;nil&#39;
                        setItermProfile Light
                end
        end
    end
end

if status --is-login
    if status --is-interactive
        sync_appearance
    end
end
</code></pre><p>If the appearance change, you can call <code class=w>sync_appearance</code> function in your shell to sync with the OS dark/light appearance.<p><footer><i>Any comment? Click on my email below and I'll add it.</i><table><tbody><tr class=ct><td>author<td><span class=bc><a href="mailto:Yann Esposito <yann@esposito.host>?subject=yblog: Catalina iTerm Theme switch" class=bo>Yann Esposito &lt;yann@esposito.host></a></span><tr class=cg><td>gpg<td><a href=files/publickey.txt>CB420F8005F1A662</a><tr class=ct><td>tags<td><tr class=cg><td>date<td>2019-11-10<tr class=ct><td>rss<td><a href=/rss.xml>RSS</a> (<a href="https://validator.w3.org/feed/check.cgi?url=https%3A%2F%2Fher.esy.fun%2Frss.xml">validate</a>)<tr class=cg><td>size<td><span class=web-file-size> 11K (html 5.0K, css 5.9K)</span><tr class=ct><td>gz<td><span class=gzweb-file-size> 3.8K (html 1.9K, css 2.0K)</span><tr class=cg><td>generated<td>2021-04-18T10:16:08.368217Z</table><p></footer></p><br><a href=gemini://her.esy.fun/posts/0007-switch-iterm-profile-catalina/index.gmi><code>=> This article is also available on gemini</code></a></div><div id=postamble class=aq><div class=ak><nav><a href=/index.html>Home</a> |
<a href=/slides.html>Slides</a> |
<a href=/about-me.html>About</a>
<span class=ai>(<a href=https://gitea.esy.fun/yogsototh>code</a>
<a href=https://espial.esy.fun/u:yogsototh>bookmarks</a>
<a href=https://espial.esy.fun/u:yogsototh/notes>notes</a>)</span> |
<a href=#preamble>↑ Top ↑</a></nav></div></div></div>