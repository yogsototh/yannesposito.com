<!doctype html><html lang=fr><meta charset=utf-8><title>YBlog - Arbres ; Pragmatisme et Formalisme</title><meta name=keywords content="XML,Perl,programmation,arbre,théorie,mathématiques,regexp,script"><link rel="shortcut icon" type=image/x-icon href=../../../../Scratch/img/favicon.ico><link rel=stylesheet href=../../../../Scratch/css/brutalist.css><link rel=stylesheet href=../../../../Scratch/css/pandoc-solarized.css><link rel=alternate type=application/rss+xml title=RSS href=../../../../Scratch/fr/blog/feed/feed.xml><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon href=../../../../Scratch/img/about/FlatAvatar@2x.png><link href=https://twitter.com/yogsototh rel=me><link href=https://github.com/yogsototh rel=me><link href=mailto:yann.esposito@gmail.com rel=me><link rel=pgpkey href=../../../../pubkey.txt><body lang=fr class=aj><div id=content><div id=header><div id=choix><span id=choixlang><a href=../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism/>Anglais</a></span>
<span class=al><a href=#navigation>↓ Menu ↓</a></span>
<span class=bl></span></div></div><div id=titre><h1>Arbres ; Pragmatisme et Formalisme</h1><h2>Quand la théorie est plus pratique que la pratique</h2></div><div class=bl></div><div id=afterheader class=aj><div class=bn><div class=bj><p><span class=sc><abbr title="Trop long; pas lu">tlpl</abbr>: </span>&nbsp;:<ul><li>J’ai essayé de programmer un simple filtre ;<li>J’ai été bloqué pendant deux jours ;<li>J’ai arrêté de penser comme un robot ;<li>J’ai utilisé un papier et un stylo ;<li>J’ai fait un peu de maths ;<li>J’ai résolu le problème en 10 minutes ;<li>Conclusion: Pragmatisme n’est pas : «n’utilisez jamais la théorie».</ul></div><h2 id=résumé-plus-long-que-le-tlpl>Résumé (plus long que le <span class=sc><abbr title="Trop long; pas lu">tlpl</abbr>: </span>)</h2><p>Je devais résoudre un problème à mon travail. Au début cela semblait assez facile. J’ai donc commencé à programmer tout de suite. Je suis alors entré dans un cercle infernal d’essais et de réparations. Voilà à quoi ressemblait cet étrange état de boucle infini&nbsp;:<blockquote><p>– Plus que ça a réparer et ça devrait être bon.<br>– Très bien, maintenant ça doit marcher.<br>– Oui !!<br>– Ah mince! J’ai oublié ce détail…<br><code>répéter jusqu'à la mort</code></blockquote><p>Après deux jours à me prendre pour <a href=http://fr.wikipedia.org/wiki/Sisyphe>Sisyphe</a>, je me suis arrêté pour repenser le problème. J’ai pris un stylo et une feuille de papier. Je me suis souvenu de de ce que j’avais appris sur les arbres pendant mon doctorat. Finalement, le problème fut résolu en moins de 20 minutes.<p>Je pense que la leçon à retenir de cette expérience est de se souvenir que la méthodologie la plus efficace pour résoudre ce problème <em>pragamtique</em> était la méthode <em>théorique</em>. Ça ne signifie pas que la méthode théorique est toujours la meilleure, mais en tout cas, il ne faut pas l’écarter.<hr><h1 id=lanecdote>L’anecdote</h1><p>Apparemment 90% des programmeurs sont incapable de programmer une recherche binaire sans faire de bug. L’algorithme est pourtant connu et facile à comprendre. Cependant, il est difficile à programmer sans bug. J’ai participé à <a href=http://reprog.wordpress.com/2010/04/19/are-you-one-of-the-10-percent/>ce concours</a>. Vous pouvez voir les <a href=http://reprog.wordpress.com/2010/04/21/binary-search-redux-part-1/>résultats ici</a><a href=#fn1 class=g id=fnref1><sup>1</sup></a>. J’ai dû faire face à un problème similaire à mon travail. Il paraissait simple au départ. Transformer un <sc>xml</sc> d’un format à un autre.<p>Voici le format général du <sc>xml</sc> source&nbsp;:<div class=m id=cb1><pre class="m xml"><code class="m xml"><a class=l id=cb1-1 title=1><span class=kw>&lt;rubrique&gt;</span></a>
<a class=l id=cb1-2 title=2>    <span class=kw>&lt;contenu&gt;</span></a>
<a class=l id=cb1-3 title=3>        <span class=kw>&lt;tag1&gt;</span>value1<span class=kw>&lt;/tag1&gt;</span></a>
<a class=l id=cb1-4 title=4>        <span class=kw>&lt;tag2&gt;</span>value2<span class=kw>&lt;/tag2&gt;</span></a>
<a class=l id=cb1-5 title=5>        ...</a>
<a class=l id=cb1-6 title=6>    <span class=kw>&lt;/contenu&gt;</span></a>
<a class=l id=cb1-7 title=7>    <span class=kw>&lt;enfant&gt;</span></a>
<a class=l id=cb1-8 title=8>        <span class=kw>&lt;rubrique&gt;</span></a>
<a class=l id=cb1-9 title=9>            ...</a>
<a class=l id=cb1-10 title=10>        <span class=kw>&lt;/rubrique&gt;</span></a>
<a class=l id=cb1-11 title=11>        ...</a>
<a class=l id=cb1-12 title=12>        <span class=kw>&lt;rubrique&gt;</span></a>
<a class=l id=cb1-13 title=13>            ...</a>
<a class=l id=cb1-14 title=14>        <span class=kw>&lt;/rubrique&gt;</span></a>
<a class=l id=cb1-15 title=15>    <span class=kw>&lt;/enfant&gt;</span></a>
<a class=l id=cb1-16 title=16><span class=kw>&lt;/menu&gt;</span></a></code></pre></div><p>et le format d’arrivé est celui-ci&nbsp;:<div class=m id=cb2><pre class="m xml"><code class="m xml"><a class=l id=cb2-1 title=1><span class=kw>&lt;item</span><span class=ot> name=</span><span class=st>&quot;Menu0&quot;</span><span class=kw>&gt;</span></a>
<a class=l id=cb2-2 title=2>    <span class=kw>&lt;value&gt;</span></a>
<a class=l id=cb2-3 title=3>        <span class=kw>&lt;item</span><span class=ot> name=</span><span class=st>&quot;menu&quot;</span><span class=kw>&gt;</span></a>
<a class=l id=cb2-4 title=4>            <span class=kw>&lt;value&gt;</span></a>
<a class=l id=cb2-5 title=5>                <span class=kw>&lt;item</span><span class=ot> name=</span><span class=st>&quot;tag1&quot;</span><span class=kw>&gt;</span></a>
<a class=l id=cb2-6 title=6>                    <span class=kw>&lt;value&gt;</span>value1<span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-7 title=7>                <span class=kw>&lt;/item&gt;</span></a>
<a class=l id=cb2-8 title=8>                <span class=kw>&lt;item</span><span class=ot> name=</span><span class=st>&quot;tag2&quot;</span><span class=kw>&gt;</span></a>
<a class=l id=cb2-9 title=9>                    <span class=kw>&lt;value&gt;</span>value2<span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-10 title=10>                <span class=kw>&lt;/item&gt;</span></a>
<a class=l id=cb2-11 title=11>                ...</a>
<a class=l id=cb2-12 title=12>                <span class=kw>&lt;item</span><span class=ot> name=</span><span class=st>&quot;menu&quot;</span><span class=kw>&gt;</span></a>
<a class=l id=cb2-13 title=13>                    <span class=kw>&lt;value&gt;</span></a>
<a class=l id=cb2-14 title=14>                        ...</a>
<a class=l id=cb2-15 title=15>                    <span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-16 title=16>                    <span class=kw>&lt;value&gt;</span></a>
<a class=l id=cb2-17 title=17>                        ...</a>
<a class=l id=cb2-18 title=18>                    <span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-19 title=19>                <span class=kw>&lt;/item&gt;</span></a>
<a class=l id=cb2-20 title=20>            <span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-21 title=21>        <span class=kw>&lt;/item&gt;</span></a>
<a class=l id=cb2-22 title=22>    <span class=kw>&lt;/value&gt;</span></a>
<a class=l id=cb2-23 title=23><span class=kw>&lt;/item&gt;</span></a></code></pre></div><p>À première vue, cela m’a paru simple. J’étais certain de pouvoir y arriver en me fixant les règles suivantes&nbsp;:<ol type=1><li>ne pas utiliser <sc>xslt</sc> ;<li>ne pas utiliser de parseur <sc>xml</sc> ;<li>résoudre le problème en utilisant un simple script perl</ol><p>Vous pouvez essayer si vous le souhaitez. Si vous attaquez ce problème directement en écrivant le programme, ce ne sera certainement pas si simple. Je peux le dire, parce que c’est ce que j’ai fait. Et je dois dire que j’ai perdu une journée de travail complète en m’y prenant de la sorte. En réalité, il y avait pas mal de petits détails dont je ne parle pas qui m’ont induis en erreur et qui m’ont fait perdre encore plus de temps.<p>Pourquoi étais-je incapable de résoudre ce problème si simple en aparence ?<p>Voici comment je m’y suis pris&nbsp;:<ol type=1><li>Réfléchir<li>Écrire le programme<li>Essayer le programme<li>Vérifier les résultats<li>Trouver un bug<li>Résoudre le bug<li>Reprendre à l’étape 3</ol><p>Il s’agissait d’une méthode de travail standard pour un ingénieur en informatique. L’erreur venait de la première étape. J’ai d’abord pensé à comment résoudre le problème mais avec des yeux d’<em>ingéinieur pragmatique</em>. Je me suis simplement dit&nbsp;:<blockquote><p>Ça à l’air de pouvoir se résouvre avec un petit script de <em>search&replace</em> en perl Commençons à écrire le code maintenant.</blockquote><p>C’est la deuxième phrase qui est complètement fausse. Parce que j’avais mal commencé et que cette méthodologie de travail ne fonctionne pas lorsque l’on part vraiment mal.<h2 id=réfléchir>Réfléchir</h2><p>Après un certain temps, j’ai arrêté de programmer et je me suis dit : «Maintenant, ça suffit !». J’ai pris une feuille et un stylo et j’ai commencé à dessiner des arbres.<p>J’ai commencer par simplifier un peu en enlevant le maximum de verbiage. Tout d’abord en renommant <code>&lt;item name="Menu"></code> par un simple <code>M</code> par exemple. J’ai obtenu quelque chose comme&nbsp;:<p><img src=../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism/code/The_source_tree.png alt="L'arbre source"><p>et<p><img src=../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism/code/The_destination_tree.png alt="L'arbre destination"><p>Puis, je me suis fait la réflexion suivante&nbsp;:<p>Dans les distances d’éditions sur les arbres, chaque opération atomique correspond à un simple <em>search and replace</em> sur mon fichier <sc>xml</sc> source<a href=#fn2 class=g id=fnref2><sup>2</sup></a>. On considère trois opérations atomiques sur les arbres&nbsp;:<ul><li><em>substitution</em>: renommer un nœud<li><em>insertion</em>: ajouter un nœud<li><em>délétion</em>: supprimer un nœud</ul><p>Une des particularité avec les transformations sur les arbres est celle-ci : supprimer un nœud et tous ses enfants deviendront les enfants du père de ce nœud.<p>Un exemple:<pre class=u>
r - x - a
  \   \
   \    b
    y - c   
</pre><p>Si vous supprimez le nœud <code>x</code>, vous obtenez<pre class=u>
    a
  /
r - b
  \
    y - c   
</pre><p>Et regardez ce que ça implique quand on l’écrit en <sc>xml</sc>&nbsp;:<div class=m id=cb3><pre class="m xml"><code class="m xml"><a class=l id=cb3-1 title=1><span class=kw>&lt;r&gt;</span></a>
<a class=l id=cb3-2 title=2>  <span class=kw>&lt;x&gt;</span></a>
<a class=l id=cb3-3 title=3>    <span class=kw>&lt;a&gt;</span>value for a<span class=kw>&lt;/a&gt;</span></a>
<a class=l id=cb3-4 title=4>    <span class=kw>&lt;b&gt;</span>value for b<span class=kw>&lt;/b&gt;</span></a>
<a class=l id=cb3-5 title=5>  <span class=kw>&lt;/x&gt;</span></a>
<a class=l id=cb3-6 title=6>  <span class=kw>&lt;y&gt;</span></a>
<a class=l id=cb3-7 title=7>    <span class=kw>&lt;c&gt;</span>value for c<span class=kw>&lt;/c&gt;</span></a>
<a class=l id=cb3-8 title=8>  <span class=kw>&lt;/y&gt;</span></a>
<a class=l id=cb3-9 title=9><span class=kw>&lt;/r&gt;</span></a></code></pre></div><p>Alors supprimer tous les nœuds <code>x</code> revient à faire passer le <sc>xml</sc> à travers le filtre suivant&nbsp;:<div class=m id=cb4><pre class="m perl"><code class="m perl"><a class=l id=cb4-1 title=1><span class=kw>s/</span><span class=ot>&lt;\/</span><span class=ch>?</span><span class=ot>x&gt;</span><span class=kw>//g</span></a></code></pre></div><p>Par conséquent, s’il existe un transducteur déterministe à un état qui permet de transformer mes arbres ; je suis capable de transformer le <sc>xml</sc> d’un format à l’autre en utilisant une simple liste de <em>search and replace</em>.<h1 id=solution>Solution</h1><p>Transformer cet arbre&nbsp;:<pre class=u>
R - C - tag1
  \   \
   \    tag2
    E -- R - C - tag1
      \   \    \
       \   \     tag2
        \    E ...
         R - C - tag1 
           \    \
            \     tag2
             E ...
</pre><p>en celui-ci&nbsp;:<pre class=u>
                tag1
              /
M - V - M - V - tag2      tag1
              \         / 
                M --- V - tag2
                  \     \ 
                   \      M
                    \     tag1
                     \  / 
                      V - tag2
                        \ 
                          M
</pre><p>peut-être fait en utilisant le transducteur déterministe à un état suivant:<blockquote><p>C -> ε<br>E -> M<br>R -> V</blockquote><p>Ce qui peut-être traduit par les simples directives Perl suivantes&nbsp;:<div class=m id=cb5><pre class="m perl"><code class="m perl"><a class=l id=cb5-1 title=1><span class=kw>s/</span><span class=ot>C</span><span class=kw>//g</span></a>
<a class=l id=cb5-2 title=2><span class=kw>s/</span><span class=ot>E</span><span class=kw>/</span><span class=st>M</span><span class=kw>/g</span></a>
<a class=l id=cb5-3 title=3><span class=kw>s/</span><span class=ot>R</span><span class=kw>/</span><span class=st>V</span><span class=kw>/g</span></a></code></pre></div><p>Une fois adapté au <sc>xml</sc> cela devient&nbsp;:<div class=m id=cb6><pre class="m perl"><code class="m perl"><a class=l id=cb6-1 title=1><span class=kw>s%</span><span class=ot>&lt;/</span><span class=ch>?</span><span class=ot>contenu&gt;</span><span class=kw>%%g</span></a>
<a class=l id=cb6-2 title=2><span class=kw>s%</span><span class=ot>&lt;enfant&gt;</span><span class=kw>%</span><span class=st>&lt;item name=&quot;menu&quot;&gt;</span><span class=kw>%g</span></a>
<a class=l id=cb6-3 title=3><span class=kw>s%</span><span class=ot>&lt;/enfant&gt;</span><span class=kw>%</span><span class=st>&lt;/item&gt;</span><span class=kw>%g</span></a>
<a class=l id=cb6-4 title=4><span class=kw>s%</span><span class=ot>&lt;rubrique&gt;</span><span class=kw>%</span><span class=st>&lt;value&gt;</span><span class=kw>%g</span></a>
<a class=l id=cb6-5 title=5><span class=kw>s%</span><span class=ot>&lt;/rubrique&gt;</span><span class=kw>%</span><span class=st>&lt;/value&gt;</span><span class=kw>%g</span></a></code></pre></div><p>Et c’est tout.<h1 id=conclusion>Conclusion</h1><p>Même si cela peut sembler paradoxal, parfois la solution la plus efficace à un problème pragmatique est d’utiliser une méthodologie théorique.<section class=s><hr><ol><li id=fn1><p>Normalement, je fais parti des 10% qui ont fourni une implémentation sans bug.<a href=#fnref1 class=c>↩</a><li id=fn2><p>J’ai programmé un outil qui calcule automatiquement le poids de chaque élément des matrices d’édition à partir de données.<a href=#fnref2 class=c>↩</a></ol></section></div><div id=afterarticle><div id=social><a href=../../../../Scratch/fr/blog/feed/feed.xml target=_blank rel="noopener noreferrer nofollow" class=ao>RSS</a>
·
<a href="https://twitter.com/home?status=http%3A%2F%2Fyannesposito.com/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism/%20via%20@yogsototh" target=_blank rel="noopener noreferrer nofollow" class=ao>Tweet</a>
·
<a href="http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fyannesposito.com/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism/" target=_blank rel="noopener noreferrer nofollow" class=ao>FB</a><br><a class=ad href=../../../../Scratch/fr/blog/Social-link-the-right-way/>Ces liens sociaux préservent votre vie privée</a></div><div id=navigation><a href=../../../../>Accueil</a>
<span class=co>¦</span>
<a href=../../../../Scratch/fr/blog>Blog</a>
<span class=co>¦</span>
<a href=../../../../Scratch/fr/softwares>Logiciels</a>
<span class=co>¦</span>
<a href=../../../../Scratch/fr/about>Auteur</a></div><div id=totop><a href=#header>↑ Top ↑</a></div><div id=bottom><div>Published on 2010-05-24</div><div><a href=https://twitter.com/yogsototh>Follow @yogsototh</a></div><div><a rel=license href=http://creativecommons.org/licenses/by/3.0/deed.en_US>Yann Esposito©</a></div><div>Done with
<a href=http://www.vim.org target=_blank rel="noopener noreferrer nofollow"><strike>Vim</strike></a>
<a href=http://spacemacs.org target=_blank rel="noopener noreferrer nofollow">spacemacs</a>
<span class=bx>&</span>
<a href=http://nanoc.ws target=_blank rel="noopener noreferrer nofollow"><strike>nanoc</strike></a>
<a href=http://jaspervdj.be/hakyll target=_blank rel="noopener noreferrer nofollow">Hakyll</a></div><hr><div style=max-width:100%><a href=https://cardanohub.org><img src=../../../../Scratch/img/ada-logo.png class=aq style=height:16px;border-radius:50%;vertical-align:middle;display:inline-block>
ADA:</a>
<code style=display:inline-block;word-wrap:break-word;text-align:left;vertical-align:top;max-width:85%>DdzFFzCqrhtAvdkmATx5Fm8NPJViDy85ZBw13p4XcNzVzvQg8e3vWLXq23JQWFxPEXK6Kvhaxxe7oJt4VMYHxpA2vtCFiP8fziohN6Yp</code></div></div></div></div></div>