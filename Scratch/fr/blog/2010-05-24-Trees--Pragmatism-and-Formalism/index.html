<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>YBlog - Arbres ; Pragmatisme et Formalisme</title>
        <meta name="keywords" content="XML, Perl, programmation, arbre, théorie, mathématiques, regexp, script">

        <link rel="shortcut icon" type="image/x-icon" href="../../../../Scratch/img/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="../../../../Scratch/css/scientific.css" />
        <link rel="stylesheet" type="text/css" href="../../../../Scratch/css/solarized.css" />
		<!-- Font -->
        <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
        <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/yannespositocomfr" />
        <!--[if lt IE 9]>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
        <![endif]-->
    </head>
    <body lang="fr">
        <div id="content">
	        			<div id="header">
			    <div id="choix">
        	        <div id="choixlang">
						<a href="../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism" onclick="setLanguage('en')">
							English </a>
        	        </div>
					<script type="text/javascript">// 
					document.write('<div id="switchcss"><a href="#">Changer de theme</a></div>');
					// 
					</script>
                    <div class="tomenu"><a href="#navigation">↓ Menu ↓</a></div>
        	        <div class="flush"></div>
        	    </div>
			</div>

			<div id="titre">
				<h1>Arbres ; Pragmatisme et Formalisme</h1>
			</div>
			<div class="flush"></div>
			<div id="afterheader" class="article">
				<div class="corps">
					<div class="intro">

<p><span class="sc"><abbr title="Trop long; pas lu">tlpl</abbr>: </span> :</p>
<ul>
<li>J’ai essayé de programmer un simple filtre ;</li>
<li>J’ai été bloqué pendant deux jours ;</li>
<li>J’ai arrêté de penser comme un robot ;</li>
<li>J’ai utilisé un papier et un stylo ;</li>
<li>J’ai fait un peu de maths ;</li>
<li>J’ai résolu le problème en 10 minutes ;</li>
<li>Conclusion: Pragmatisme n’est pas : «n’utilisez jamais la théorie».
</div>
</li>
</ul>
<h2 id="résumé-plus-long-que-le-tlpl">Résumé (plus long que le <span class="sc"><abbr title="Trop long; pas lu">tlpl</abbr>: </span>)</h2>
<p>Je devais résoudre un problème à mon travail. Au début cela semblait assez facile. J’ai donc commencé à programmer tout de suite. Je suis alors entré dans un cercle infernal d’essais et de réparations. Voilà à quoi ressemblait cet étrange état de boucle infini :</p>
<blockquote>
<p>– Plus que ça a réparer et ça devrait être bon.<br /> – Très bien, maintenant ça doit marcher.<br /> – Oui !!<br /> – Ah mince! J’ai oublié ce détail…<br /> <code>répéter jusqu'à la mort</code></p>
</blockquote>
<p>Après deux jours à me prendre pour <a href="http://fr.wikipedia.org/wiki/Sisyphe">Sisyphe</a>, je me suis arrêté pour repenser le problème. J’ai pris un stylo et une feuille de papier. Je me suis souvenu de de ce que j’avais appris sur les arbres pendant mon doctorat. Finalement, le problème fut résolu en moins de 20 minutes.</p>
<p>Je pense que la leçon à retenir de cette expérience est de se souvenir que la méthodologie la plus efficace pour résoudre ce problème <em>pragamtique</em> était la méthode <em>théorique</em>. Ça ne signifie pas que la méthode théorique est toujours la meilleure, mais en tout cas, il ne faut pas l’écarter.</p>
<hr />
<h1 id="lanecdote">L’anecdote</h1>
<p>Apparemment 90% des programmeurs sont incapable de programmer une recherche binaire sans faire de bug. L’algorithme est pourtant connu et facile à comprendre. Cependant, il est difficile à programmer sans bug. J’ai participé à <a href="http://reprog.wordpress.com/2010/04/19/are-you-one-of-the-10-percent/">ce concours</a>. Vous pouvez voir les <a href="http://reprog.wordpress.com/2010/04/21/binary-search-redux-part-1/">résultats ici</a><sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup>. J’ai dû faire face à un problème similaire à mon travail. Il paraissait simple au départ. Transformer un <sc>xml</sc> d’un format à un autre.</p>
<p>Voici le format général du <sc>xml</sc> source :</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;rubrique&gt;</span>
    <span class="kw">&lt;contenu&gt;</span>
        <span class="kw">&lt;tag1&gt;</span>value1<span class="kw">&lt;/tag1&gt;</span>
        <span class="kw">&lt;tag2&gt;</span>value2<span class="kw">&lt;/tag2&gt;</span>
        ...
    <span class="kw">&lt;/contenu&gt;</span>
    <span class="kw">&lt;enfant&gt;</span>
        <span class="kw">&lt;rubrique&gt;</span>
            ...
        <span class="kw">&lt;/rubrique&gt;</span>
        ...
        <span class="kw">&lt;rubrique&gt;</span>
            ...
        <span class="kw">&lt;/rubrique&gt;</span>
    <span class="kw">&lt;/enfant&gt;</span>
<span class="kw">&lt;/menu&gt;</span></code></pre>
<p>et le format d’arrivé est celui-ci :</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;item</span><span class="ot"> name=</span><span class="st">&quot;Menu0&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;value&gt;</span>
        <span class="kw">&lt;item</span><span class="ot"> name=</span><span class="st">&quot;menu&quot;</span><span class="kw">&gt;</span>
            <span class="kw">&lt;value&gt;</span>
                <span class="kw">&lt;item</span><span class="ot"> name=</span><span class="st">&quot;tag1&quot;</span><span class="kw">&gt;</span>
                    <span class="kw">&lt;value&gt;</span>value1<span class="kw">&lt;/value&gt;</span>
                <span class="kw">&lt;/item&gt;</span>
                <span class="kw">&lt;item</span><span class="ot"> name=</span><span class="st">&quot;tag2&quot;</span><span class="kw">&gt;</span>
                    <span class="kw">&lt;value&gt;</span>value2<span class="kw">&lt;/value&gt;</span>
                <span class="kw">&lt;/item&gt;</span>
                ...
                <span class="kw">&lt;item</span><span class="ot"> name=</span><span class="st">&quot;menu&quot;</span><span class="kw">&gt;</span>
                    <span class="kw">&lt;value&gt;</span>
                        ...
                    <span class="kw">&lt;/value&gt;</span>
                    <span class="kw">&lt;value&gt;</span>
                        ...
                    <span class="kw">&lt;/value&gt;</span>
                <span class="kw">&lt;/item&gt;</span>
            <span class="kw">&lt;/value&gt;</span>
        <span class="kw">&lt;/item&gt;</span>
    <span class="kw">&lt;/value&gt;</span>
<span class="kw">&lt;/item&gt;</span></code></pre>
<p>À première vue, cela m’a paru simple. J’étais certain de pouvoir y arriver en me fixant les règles suivantes :</p>
<ol style="list-style-type: decimal">
<li>ne pas utiliser <sc>xslt</sc> ;</li>
<li>ne pas utiliser de parseur <sc>xml</sc> ;</li>
<li>résoudre le problème en utilisant un simple script perl</li>
</ol>
<p>Vous pouvez essayer si vous le souhaitez. Si vous attaquez ce problème directement en écrivant le programme, ce ne sera certainement pas si simple. Je peux le dire, parce que c’est ce que j’ai fait. Et je dois dire que j’ai perdu une journée de travail complète en m’y prenant de la sorte. En réalité, il y avait pas mal de petits détails dont je ne parle pas qui m’ont induis en erreur et qui m’ont fait perdre encore plus de temps.</p>
<p>Pourquoi étais-je incapable de résoudre ce problème si simple en aparence ?</p>
<p>Voici comment je m’y suis pris :</p>
<ol style="list-style-type: decimal">
<li>Réfléchir</li>
<li>Écrire le programme</li>
<li>Essayer le programme</li>
<li>Vérifier les résultats</li>
<li>Trouver un bug</li>
<li>Résoudre le bug</li>
<li>Reprendre à l’étape 3</li>
</ol>
<p>Il s’agissait d’une méthode de travail standard pour un ingénieur en informatique. L’erreur venait de la première étape. J’ai d’abord pensé à comment résoudre le problème mais avec des yeux d’<em>ingéinieur pragmatique</em>. Je me suis simplement dit :</p>
<blockquote>
<p>Ça à l’air de pouvoir se résouvre avec un petit script de <em>search&amp;replace</em> en perl Commençons à écrire le code maintenant.</p>
</blockquote>
<p>C’est la deuxième phrase qui est complètement fausse. Parce que j’avais mal commencé et que cette méthodologie de travail ne fonctionne pas lorsque l’on part vraiment mal.</p>
<h2 id="réfléchir">Réfléchir</h2>
<p>Après un certain temps, j’ai arrêté de programmer et je me suis dit : «Maintenant, ça suffit !». J’ai pris une feuille et un stylo et j’ai commencé à dessiner des arbres.</p>
<p>J’ai commencer par simplifier un peu en enlevant le maximum de verbiage. Tout d’abord en renommant <code>&lt;item name=&quot;Menu&quot;&gt;</code> par un simple <code>M</code> par exemple. J’ai obtenu quelque chose comme :</p>
<p><img src="../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism/code/The_source_tree.png" alt="L'arbre source" /></p>
<p>et</p>
<p><img src="../../../../Scratch/en/blog/2010-05-24-Trees--Pragmatism-and-Formalism/code/The_destination_tree.png" alt="L'arbre destination" /></p>
<p>Puis, je me suis fait la réflexion suivante :</p>
<p>Dans les distances d’éditions sur les arbres, chaque opération atomique correspond à un simple <em>search and replace</em> sur mon fichier <sc>xml</sc> source<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup>. On considère trois opérations atomiques sur les arbres :</p>
<ul>
<li><em>substitution</em>: renommer un nœud</li>
<li><em>insertion</em>: ajouter un nœud</li>
<li><em>délétion</em>: supprimer un nœud</li>
</ul>
<p>Une des particularité avec les transformations sur les arbres est celle-ci : supprimer un nœud et tous ses enfants deviendront les enfants du père de ce nœud.</p>
<p>Un exemple:</p>
<pre class="twilight">
r - x - a
  \   \
   \    b
    y - c   
</pre>

<p>Si vous supprimez le nœud <code>x</code>, vous obtenez</p>
<pre class="twilight">
    a
  /
r - b
  \
    y - c   
</pre>

<p>Et regardez ce que ça implique quand on l’écrit en <sc>xml</sc> :</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;r&gt;</span>
  <span class="kw">&lt;x&gt;</span>
    <span class="kw">&lt;a&gt;</span>value for a<span class="kw">&lt;/a&gt;</span>
    <span class="kw">&lt;b&gt;</span>value for b<span class="kw">&lt;/b&gt;</span>
  <span class="kw">&lt;/x&gt;</span>
  <span class="kw">&lt;y&gt;</span>
    <span class="kw">&lt;c&gt;</span>value for c<span class="kw">&lt;/c&gt;</span>
  <span class="kw">&lt;/y&gt;</span>
<span class="kw">&lt;/r&gt;</span></code></pre>
<p>Alors supprimer tous les nœuds <code>x</code> revient à faire passer le <sc>xml</sc> à travers le filtre suivant :</p>
<pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s/</span><span class="ot">&lt;\/</span><span class="ch">?</span><span class="ot">x&gt;</span><span class="kw">//g</span></code></pre>
<p>Par conséquent, s’il existe un transducteur déterministe à un état qui permet de transformer mes arbres ; je suis capable de transformer le <sc>xml</sc> d’un format à l’autre en utilisant une simple liste de <em>search and replace</em>.</p>
<h1 id="solution">Solution</h1>
<p>Transformer cet arbre :</p>
<pre class="twilight">
R - C - tag1
  \   \
   \    tag2
    E -- R - C - tag1
      \   \    \
       \   \     tag2
        \    E ...
         R - C - tag1 
           \    \
            \     tag2
             E ...
</pre>

<p>en celui-ci :</p>
<pre class="twilight">
                tag1
              /
M - V - M - V - tag2      tag1
              \         / 
                M --- V - tag2
                  \     \ 
                   \      M
                    \     tag1
                     \  / 
                      V - tag2
                        \ 
                          M
</pre>

<p>peut-être fait en utilisant le transducteur déterministe à un état suivant:</p>
<blockquote>
<p>C -&gt; ε<br /> E -&gt; M<br /> R -&gt; V</p>
</blockquote>
<p>Ce qui peut-être traduit par les simples directives Perl suivantes :</p>
<pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s/</span><span class="ot">C</span><span class="kw">//g</span>
<span class="kw">s/</span><span class="ot">E</span><span class="kw">/</span><span class="st">M</span><span class="kw">/g</span>
<span class="kw">s/</span><span class="ot">R</span><span class="kw">/</span><span class="st">V</span><span class="kw">/g</span></code></pre>
<p>Une fois adapté au <sc>xml</sc> cela devient :</p>
<pre class="sourceCode perl"><code class="sourceCode perl"><span class="kw">s%</span><span class="ot">&lt;/</span><span class="ch">?</span><span class="ot">contenu&gt;</span><span class="kw">%%g</span>
<span class="kw">s%</span><span class="ot">&lt;enfant&gt;</span><span class="kw">%</span><span class="st">&lt;item name=&quot;menu&quot;&gt;</span><span class="kw">%g</span>
<span class="kw">s%</span><span class="ot">&lt;/enfant&gt;</span><span class="kw">%</span><span class="st">&lt;/item&gt;</span><span class="kw">%g</span>
<span class="kw">s%</span><span class="ot">&lt;rubrique&gt;</span><span class="kw">%</span><span class="st">&lt;value&gt;</span><span class="kw">%g</span>
<span class="kw">s%</span><span class="ot">&lt;/rubrique&gt;</span><span class="kw">%</span><span class="st">&lt;/value&gt;</span><span class="kw">%g</span></code></pre>
<p>Et c’est tout.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Même si cela peut sembler paradoxal, parfois la solution la plus efficace à un problème pragmatique est d’utiliser une méthodologie théorique.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Normalement, je fais parti des 10% qui ont fourni une implémentation sans bug.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>J’ai programmé un outil qui calcule automatiquement le poids de chaque élément des matrices d’édition à partir de données.<a href="#fnref2">↩</a></p></li>
</ol>
</div>
				</div>

                <div id="social">
                    <a target="_blank" href="http://feeds.feedburner.com/yannespositocomfr" class="social">r</a>
                    ·
                     <a target="_blank" href="https://twitter.com/home?status=http://yannesposito.com/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism/index.html%20via%20@yogsototh" class="social">t</a>
                    ·
                    <a target="_blank" href="http://www.facebook.com/sharer/sharer.php?u=/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism" class="social">`</a>
                    ·
                     <a target="_blank" href="https://plus.google.com/share?url=http://yannesposito.com/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism" class="social">g</a>
                    <br />
                    <a class="message" href="../../../../Scratch/fr/blog/Social-link-the-right-way/">Ces liens sociaux préservent votre vie privée</a>
                </div>
        	    <div id="navigation">
                    <a href="../../../../">Home</a>
                    <span class="sep">¦</span>
        	        <a href="../../../../Scratch/fr/blog">Blog</a>
                    <span class="sep">¦</span>
                    <a href="../../../../Scratch/fr/softwares">Softwares</a>
                    <span class="sep">¦</span>
                    <a href="../../../../Scratch/fr/about">About</a>
        	    </div>
                <div id="totop"><a href="#header">↑ Top ↑</a></div>
				<div class="corps" id="comment">
            	    <h2 class="first">Comments</h2>
					<div id="disqus_thread"></div>
        			<script type="text/javascript">
        			    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        			    var disqus_shortname = 'yannesposito'; // required: replace example with your forum shortname
                        var disqus_identifier = '/Scratch/fr/blog/2010-05-24-Trees--Pragmatism-and-Formalism/index.html';

        			    /* * * DON'T EDIT BELOW THIS LINE * * */
        			    (function() {
        			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        			        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        			    })();
        			</script>
        			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
				</div>
                <div class="tomenu"><a href="#navigation">↑ Menu ↑</a></div>
				<div id="bottom">
            	    <div>
            	        Published on 2010-05-24
            	    </div>
            	    <div>
            	        <a href="https://twitter.com/yogsototh">Follow @yogsototh</a>
            	    </div>
            	    <div>
            	       Yann Esposito©
            	    </div>
            	    <div>
            	        Done with
            	        <a href="http://www.vim.org">Vim</a>
						<span class="nicer">&amp;</span>
						<a href="http://jaspervdj.be/hakyll">Hakyll</a>
            	    </div>
            	</div>
			</div>

        </div>
    </body>
    <script type="text/javascript" src="../../../../Scratch/js/jquery-1.3.1.min.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/index.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/highlight/highlight.pack.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/article.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</html>
