<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>YBlog - Why I won't use CoffeeScript (sadly)</title>
        <meta name="keywords" content="Coffeescript">

        <link rel="shortcut icon" type="image/x-icon" href="../../../../Scratch/img/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="../../../../Scratch/css/scientific.css" />
        <link rel="stylesheet" type="text/css" href="../../../../Scratch/css/solarized.css" />
		<!-- Font -->
        <link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
        <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/yannespositocomen" />
        <!--[if lt IE 9]>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
        <![endif]-->
    </head>
    <body lang="en">
        <div id="content">
	        			<div id="header">
			    <div id="choix">
        	        <div id="choixlang">
						<a href="../../../../Scratch/fr/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript" onclick="setLanguage('fr')">
							Français </a>
        	        </div>
					<script type="text/javascript">// 
					document.write('<div id="switchcss"><a href="#">Change Theme</a></div>');
					// 
					</script>
                    <div class="tomenu"><a href="#navigation">↓ Menu ↓</a></div>
        	        <div class="flush"></div>
        	    </div>
			</div>

			<div id="titre">
				<h1>Why I won't use CoffeeScript (sadly)</h1>
			</div>
			<div class="flush"></div>
			<div id="afterheader" class="article">
				<div class="corps">
					<p><img src="../../../../Scratch/img/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript/main.png" alt="Title image" /></p>
<div class="encadre">

<p><em>Update</em>: I might change my mind now. Why? I just discovered a <a href="https://github.com/rstacruz/js2coffee">js2coffee converter</a>. Furthermore Denis Knauf told me about a <code>CoffeeScript.eval</code> function. And as Denis said: “it is time to use Coffeescript as a javascript with Ruby-like syntax not a Ruby-like programming language”.</p>
</div>

<div class="intro">

<p><span class="sc"><abbr title="Too long; didn't read">tl;dr</abbr>: </span> I would have loved to program client side using a Ruby-like syntax. But in the end, CoffeScript raised more disavantages than advantages.</p>
</div>

<p>Recently I read <a href="http://news.ycombinator.com/item?id=2053956">this entry</a> on HackerNews. The most upvoted comment praised (within other) <a href="http://coffeescript.org">CoffeeScript</a>. Recently I used <em>a lot</em> of javascript. After trying <a href="http://sproutcore.com">Sproutcore</a>, <a href="http://cappuccino.org">Cappuccino</a>, looking at <a href="documentcloud.github.com/backbone/">backbone.js</a> <em>&amp;</em> <a href="javascriptmvc.com">javascriptMVC</a>, I’ve finally decided to make my own minimal javascript MVC framework.<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup></p>
<p>I had to fight the horrible syntax of javascript. It was like experiencing a back-in-time travel:</p>
<ul>
<li>Verbose Java-like syntax,</li>
<li>Strange and insanely Verbose Object Oriented Programming,</li>
<li>No easy way to refer to current instance of a class (<code>this</code> doesn’t work really well),</li>
<li>etc…</li>
</ul>
<p>It was so annoying at a point, I had thinked about creating my <em>own</em> CoffeeScript.</p>
<p>I’d finished a first draft of my MVC javascript framework. Just after I learned about the existence of CoffeeScript, I immediately created a new git branch to try it.</p>
<p>Here is my experience:</p>
<ol style="list-style-type: decimal">
<li>I had to install <code>node.js</code> and use <code>npm</code> just to use CoffeeScript. It wasn’t a big deal but it wasn’t as straightfoward as I expected either.</li>
<li>Existing javascript file are not coffee compatible. I <em>had</em> to translate them by hand. There were no script to help me in this process. Thanks to <a href="http://vim.org">vim</a>, it wasn’t too hard to translate 90% of the javascript using some regexp. The <code>--watch</code> option of coffee was also really helpful to help in the translation. But I had to write my own shell script in order to follow an entire directory tree.</li>
<li>An unexpected event. I made some meta-programming in javascript using <code>eval</code>. But in order to work, the string in the eval must be written in pure javascript not in coffee. It was like writing in two different languages. Really not so good.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>Advantages:</p>
<ul>
<li>Readability: clearly it resolved most of javascript syntax problems</li>
<li>Verbosity: I gained 14% line, 22% words, 14% characters</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Added another compilation step to see how my code behave on the website.</li>
<li>I had to launch some script to generate on change every of my javascript file</li>
<li>I have to learn another Ruby-like language,</li>
<li>meta-programming become a poor experience,</li>
<li>I must convince people working with me to:
<ul>
<li>install <code>node.js</code>, <code>npm</code> and CoffeeScript,</li>
<li>remember to launch a script at each code session,</li>
<li>learn and use another ruby-like language</li>
</ul></li>
</ul>
<p>The last two point were definitively really problematic for me.</p>
<p>But even if I’ll have to work alone, I certainly won’t use CoffeeScript either. CoffeeScript is a third party and any of their update can break my code. I experienced this kind of situation many times, and it is very annoying. Far more than coding with a bad syntax.</p>
<h2 id="digression">Digression</h2>
<p>I am sad. I wanted so much to program on Web Client with a Ruby-like syntax. But in the end I think it is not for me. I have to use the <em>horrible</em> javascript syntax for now. At least I would have preferred a complete <code>ruby2js</code> script for example<sup><a href="#fn2" class="footnoteRef" id="fnref2">2</a></sup>. But I believe it would be a really hard task just to simulate the access of current class for example.</p>
<p>Typically <code>@x</code> translate into <code>this.x</code>. But the following code will not do what I should expect. Call the foo function of the current class.</p>
<pre class="sourceCode ruby"><code class="sourceCode ruby">-&gt; 
<span class="kw">class</span> <span class="dt">MyClass</span>
  foo: -&gt;
    alert(<span class="st">'ok'</span>)

  bar: -&gt;
    $(<span class="st">'#content'</span>).load( <span class="st">'/content.html'</span>, ( -&gt; <span class="ot">@foo</span>(x) ) )
    <span class="co"># That won't call MyClass.foo</span></code></pre>
<p>The only way to handle this is to make the following code:</p>
<pre class="sourceCode ruby"><code class="sourceCode ruby">-&gt; 
<span class="kw">class</span> <span class="dt">MyClass</span>
  foo: -&gt;
    alert(<span class="st">'ok'</span>)

  bar: -&gt;
    <span class="dv">self</span>=this
    $(<span class="st">'#content'</span>).load( <span class="st">'/content.html'</span>, ( -&gt; <span class="dv">self</span>.foo(x) ) )</code></pre>
<p>Knowing this, <code>@</code> notation lose most of its interrest for me.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I know it may not be the best nor productive decision, but I’d like to start from scratch and understand how things works under the hood.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>I know there is <code>rb2js</code>, but it doesn’t handle the problem I talk about.<a href="#fnref2">↩</a></p></li>
</ol>
</div>
				</div>

                <div id="social">
                    <a target="_blank" href="http://feeds.feedburner.com/yannespositocomen" class="social">r</a>
                    ·
                     <a target="_blank" href="https://twitter.com/home?status=http://yannesposito.com/Scratch/en/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript/index.html%20via%20@yogsototh" class="social">t</a>
                    ·
                    <a target="_blank" href="http://www.facebook.com/sharer/sharer.php?u=/Scratch/en/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript" class="social">`</a>
                    ·
                     <a target="_blank" href="https://plus.google.com/share?url=http://yannesposito.com/Scratch/en/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript" class="social">g</a>
                    <br />
                    <a class="message" href="../../../../Scratch/en/blog/Social-link-the-right-way/">These social sharing links preserve your privacy</a>
                </div>
        	    <div id="navigation">
                    <a href="../../../../">Home</a>
                    <span class="sep">¦</span>
        	        <a href="../../../../Scratch/en/blog">Blog</a>
                    <span class="sep">¦</span>
                    <a href="../../../../Scratch/en/softwares">Softwares</a>
                    <span class="sep">¦</span>
                    <a href="../../../../Scratch/en/about">About</a>
        	    </div>
                <div id="totop"><a href="#header">↑ Top ↑</a></div>
				<div class="corps" id="comment">
            	    <h2 class="first">Comments</h2>
					<div id="disqus_thread"></div>
        			<script type="text/javascript">
        			    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        			    var disqus_shortname = 'yannesposito'; // required: replace example with your forum shortname
                        var disqus_identifier = '/Scratch/en/blog/2011-01-03-Why-I-sadly-won-t-use-coffeescript/index.html';

        			    /* * * DON'T EDIT BELOW THIS LINE * * */
        			    (function() {
        			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        			        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        			    })();
        			</script>
        			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
				</div>
                <div class="tomenu"><a href="#navigation">↑ Menu ↑</a></div>
				<div id="bottom">
            	    <div>
            	        Published on 2011-01-03
            	    </div>
            	    <div>
            	        <a href="https://twitter.com/yogsototh">Follow @yogsototh</a>
            	    </div>
            	    <div>
            	       Yann Esposito©
            	    </div>
            	    <div>
            	        Done with
            	        <a href="http://www.vim.org">Vim</a>
						<span class="nicer">&amp;</span>
						<a href="http://jaspervdj.be/hakyll">Hakyll</a>
            	    </div>
            	</div>
			</div>

        </div>
    </body>
    <script type="text/javascript" src="../../../../Scratch/js/jquery-1.3.1.min.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/index.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/highlight/highlight.pack.js"></script>
    <script type="text/javascript" src="../../../../Scratch/js/article.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</html>
